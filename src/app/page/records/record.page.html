<ion-header translucent>
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button defaultHref="/records"></ion-back-button>
		</ion-buttons>
		<ion-title *ngIf="record != null">{{ record.date.toLocaleString() }}</ion-title>
	</ion-toolbar>
</ion-header>

<ion-content fullscreen class="ion-padding" *ngIf="record != null">

	<app-record-card [record]="record"></app-record-card>

	<app-waveform-editor [uri]="record.getAacUri()"
						 [style.margin]="'20px 0 0 0'"
						 [style.height.px]="80"
						 [style.width]="'100%'"
						 [timeLabels]="true"></app-waveform-editor>

	<ion-list *ngIf="record.type == RecordType.Raw">
		<ion-list-header>
			<h5>Derived records</h5>
		</ion-list-header>
		<ion-item>
			<ion-label>
				<h2>No derivative record</h2>
			</ion-label>
		</ion-item>
	</ion-list>

	<ion-list>
		<ion-list-header>
			<h5>Actions</h5>
		</ion-list-header>
		<ion-item button [color]="record.markersReady ? null : 'warning'" [routerLink]="'/mark/' + record.dirName">
			<ion-icon slot="start" ios="bookmarks-outline" md="bookmarks"></ion-icon>
			<ion-label>
				<h2>Marking ({{ record.markersReady ? (record.markers.length + " marker" + (record.markers.length > 1 ? "s" : "")) : "missing" }})</h2>
			</ion-label>
		</ion-item>
		<ion-item button [disabled]="!record.hasAnyMarker()" [routerLink]="'/respeaking/' + record.dirName">
			<ion-icon slot="start" ios="volume-high-outline" md="volume-high"></ion-icon>
			<ion-label>
				<h2>Respeaking<span *ngIf="!record.hasAnyMarker()"> (need markers)</span></h2>
			</ion-label>
		</ion-item>
		<ion-item button (click)="onDeleteClick()">
			<ion-icon slot="start" ios="close-outline" md="close"></ion-icon>
			<ion-label>
				<h2>Delete</h2>
			</ion-label>
		</ion-item>
	</ion-list>

</ion-content>
